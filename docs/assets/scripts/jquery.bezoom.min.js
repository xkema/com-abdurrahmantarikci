/*
 * 	BeZoom 0.2 - jQuery plugin
 *	written by Benjamin Mock
 *	http://benjaminmock.de/bezoom-jquery-plugin/
 *
 *	Copyright (c) 2009 Benjamin Mock (http://benjaminmock.de)
 *	Dual licensed under the MIT (MIT-LICENSE.txt)
 *	and GPL (GPL-LICENSE.txt) licenses.
 *
 *	Built for jQuery library
 *	http://jquery.com
 *
 */
(function($){$.fn.bezoom=function(options){var settings={marginLeft:10,marginTop:10,identifier:'bezoom',height:200,width:200,titleSource:'title',imgSource:'href',bgColor:'#5398EE',color:'#ffffff',size:'0.8em',ajaxparent:false};options=options||{};$.extend(settings,options);this.each(function(i){var title=$(this).attr(settings.titleSource);var imgBig=$(this).attr(settings.imgSource);var titleAttribute=$(this).attr("title");var img=$(this).find('img');$(this).mouseenter(function(e){$('#'+settings.identifier).remove();$(this).attr("title","");var imgSmallHeight=$(this).find('img').height();var imgSmallWidth=$(this).find('img').width();if(!settings.ajaxparent){var pos=$(this).position();}
else{var pos=$(this).offset();}
var y=Math.ceil(pos.top-0)-imgSmallHeight+settings.marginTop;var x=Math.ceil(pos.left-0)+imgSmallWidth+settings.marginLeft;$('body').append('<div id="'+settings.identifier+'" style="border:3px solid #333; position:absolute; top:'+y+'px;left:'+x+'px;width:'+settings.width+'px;"><div style="background-color:'+settings.bgColor+';color:'+settings.color+';padding-bottom:3px;font-size:'+settings.size+';">'+title+'</div><div style="width:'+settings.width+'px;height:'+settings.height+'px;overflow:hidden;position:relative;"><img id="'+settings.identifier+'_img" src="'+imgBig+'" style="position:relative;"></div></div>');}).mouseleave(function(){$('#'+settings.identifier).remove();$(this).attr("title",titleAttribute);});$(this).mousemove(function(e){var imgSmallHeight=$(this).find('img').height();var imgSmallWidth=$(this).find('img').width();var imgBigWidth=$('#'+settings.identifier+'_img').width();var imgBigHeight=$('#'+settings.identifier+'_img').height();var widthRel=imgSmallWidth/imgBigWidth;var heightRel=imgSmallHeight/imgBigHeight;if(!settings.ajaxparent){var offset=img.position();}
else{var offset=img.offset();}
var mouseX=e.pageX-offset.left;var mouseY=e.pageY-offset.top;var imgBigX=Math.ceil((mouseX/widthRel)-(settings.width/2))*(-1);imgBigX=Math.max((-1*imgBigWidth)+settings.width,imgBigX);imgBigX=Math.min(0,imgBigX);var imgBigY=Math.ceil((mouseY/heightRel)-settings.height*0.5)*(-1);imgBigY=Math.min(0,imgBigY);imgBigY=Math.max((-1*imgBigHeight)+settings.height,imgBigY);$('#'+settings.identifier+'_img').css('left',imgBigX);$('#'+settings.identifier+'_img').css('top',imgBigY);});});return this;};})(jQuery);